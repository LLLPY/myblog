{% extends 'base.html' %}
{% load static %}

{% block title %}博客编辑{% endblock %}
{% block content %}

    <style>

        #modify-head {
            width: 100%;
            height: 100px;
            position: relative;
            background-color: #c3a1a1;
            border-radius: 15px;
            margin-bottom: 5px;
        }

        #modify-head .modifyClass {
            float: left;
            height: 100%;
            text-align: center;
            line-height: 100px;
            position: relative;
        }

        #modify-head .modifyClass span {
            font-size: 20px;
            color: white;


        }

        #modify-head .modifyClass input {
            outline: none;
            border: none;
            border-bottom: 1px solid white;
            background-color: transparent;
            color: white;
            width: 80% !important;
            padding-left: 5px;

        }


        #modify-head .modifyClass:nth-child(1) {
            width: 30%;

        }

        #modify-head .modifyClass:nth-child(2) {
            width: 20%;

        }

        #modify-head .modifyClass:nth-child(3) {
            width: 10%;


        }

        #modify-head .modifyClass:nth-child(3) span[class=modifytag],
        #modify-head .modifyClass:nth-child(4) span[class=modifytag],
        #modify-head .modifyClass:nth-child(5) span[class=modifytag] {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            height: 50%;
            display: inline-block;
            font-size: 10px !important;
            line-height: 50px;

        }

        #modify-head .modifyClass:nth-child(3) span[class=modifytag] span[class=iconfont],
        #modify-head .modifyClass:nth-child(4) span[class=modifytag] span[class=iconfont],
        #modify-head .modifyClass:nth-child(5) span[class=modifytag] span[class=iconfont] {
            font-size: 10px;
        }

        #modify-head .modifyClass:nth-child(3) input,
        #modify-head .modifyClass:nth-child(4) input,
        #modify-head .modifyClass:nth-child(5) input {
            text-align: center;
            position: absolute;
            left: 0;
            top: 50px;
            width: 100% !important;
            height: 45px;
            display: inline-block;
            line-height: 40px;
        }


        #modify-head .modifyClass:nth-child(4) {
            width: 10%;
            margin-left: 5px;


        }

        #modify-head .modifyClass:nth-child(5) {
            width: 10%;
            margin-left: 5px;


        }


        #myBlog-footer {
            margin-top: 5px;
            z-index: 0 !important;
        }

        #submit {
            outline: none;
            width: 12%;
            height: 60%;
            display: inline-block;
            border-radius: 15px;
            margin-top: 20px;
            margin-left: 30px;
            border: none;
            background-color: #fff3cd;
            font-size: 20px;
            color: gray;
            transition: all 0.5s linear;


        }

        #submit:hover {
            background-color: greenyellow;
            font-size: 25px;
        }

    </style>


    <form action="{% url 'app:modifyBlog' blogid=blogid authorid=authorid %}" method="post">
        <div id="modify-head">
            <div class="modifyClass"><span>标题</span> <input type="text" value="{{ title }}" name="title" required></div>
            <div class="modifyClass"><span>分类</span> <input type="text" list="category" value="{{ category }}" required
                                                            name="category"></div>

            <div class="modifyClass"><span class="modifytag">标签1<span class="iconfont">&#xe636;</span></span><input
                    name="tag1" list="tags" type="text" value="{{ tag1 }}"></div>
            <div class="modifyClass"><span class="modifytag">标签2<span class="iconfont">&#xe636;</span></span> <input
                    name="tag2" list="tags" type="text" value="{{ tag2 }}"></div>
            <div class="modifyClass"><span class="modifytag">标签3<span class="iconfont">&#xe636;</span></span> <input
                    name="tag3" list="tags" type="text" value="{{ tag3 }}"></div>
            <datalist id="category">
                {% for categoryObj in categoryList %}
                    <option>{{ categoryObj.title }}</option>
                {% endfor %}

            </datalist>
            <datalist id="tags">
                {% for tag in tagsList %}
                    <option>{{ tag }}</option>

                {% endfor %}

            </datalist>
            <button type="submit" id="submit">发&nbsp;&nbsp;布</button>
        </div>
        <div id="editor-trigger" style="height: 700px;">

            {% if content %}
                {{ content|safe }}
            {% else %}
                写下你的想法吧~
            {% endif %}

        </div>
    </form>

    {% comment %}引入富文本文件{% endcomment %}
    {% include 'editor.html' %}
    <script type="text/javascript">
        window.onload = function () {
            let submitDiv = document.getElementById('submit');

            function addContent() {
                let contentDiv = document.getElementById('editor-trigger');
                content = contentDiv.innerHTML;
                let newInput = document.createElement('input');
                newInput.name = 'content';
                newInput.value = content;
                submitDiv.parentNode.appendChild(newInput);
            }

            submitDiv.addEventListener('click', addContent);

        }

    </script>


    {% include 'footer.html' %}

{% endblock %}